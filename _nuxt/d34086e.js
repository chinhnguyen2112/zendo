(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{735:function(t,n,e){"use strict";e.r(n);e(30),e(20),e(29),e(40),e(26),e(41);var o=e(4),r=e(14),c=(e(19),e(21)),w=e(421),l=e(845),d=e.n(l),f=e(127),v=e.n(f),x=e(825),m=e(826);function h(object,t){var n=Object.keys(object);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(object);t&&(e=e.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),n.push.apply(n,e)}return n}var y={components:{login:x.default,register:m.default},directives:{ClickOutside:d.a},data:function(){return{MEDIA:"https://cdns.diongame.com/static/",isToggle:!1,isSidebar:!1,isOpen:!1,isNotification:!1,balance:this.$auth.loggedIn?this.$auth.user.balance:0,swap:"login",notificationUnRead:0,balanceLock:0,pinNotification:void 0,notifications:[]}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(n){Object(r.a)(t,n,source[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(source,n))}))}return t}({},Object(c.c)(["config","systemPluginConfig"],{root:!0})),watch:{isOpen:{deep:!0,handler:function(t){document.body.style.overflow=t?"hidden":"auto"}},isToggle:{deep:!0,handler:function(t){document.body.style.overflow=t?"hidden":"auto"}},isNotification:{deep:!0,handler:function(t){var n=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=7;break}if(!n.$auth.loggedIn){e.next=7;break}return e.next=4,n.$axios.$get("/notifications/get_notifications");case 4:o=e.sent,n.pinNotification=o.isError?void 0:o.body.pin,n.notifications=o.isError?[]:o.body.data;case 7:document.body.style.overflow=t?"hidden":"auto";case 8:case"end":return e.stop()}}),e)})))()}}},created:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var e;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.$auth.loggedIn){n.next=5;break}return n.next=3,t.$axios.$get("/user/balance");case 3:(e=n.sent).isError||(t.balance=e.result.balance,t.balanceLock=e.result.balanceLock);case 5:t.$nuxt.$on("login",(function(){t.isOpen=!0})),t.$nuxt.$on("refresh_balance",Object(o.a)(regeneratorRuntime.mark((function n(){var e;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.$auth.loggedIn){n.next=5;break}return n.next=3,t.$axios.$get("/user/balance");case 3:(e=n.sent).isError||(t.balance=e.result.balance,t.balanceLock=e.result.balanceLock);case 5:case"end":return n.stop()}}),n)}))));case 7:case"end":return n.stop()}}),n)})))()},mounted:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var e;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.$auth.loggedIn){n.next=5;break}return n.next=3,t.$axios.$get("/notifications/get_badge_notifications");case 3:e=n.sent,t.notificationUnRead=e.isError?0:e.body;case 5:t.sockets.subscribe("notification",(function(data){try{t.$auth.loggedIn&&(data.broadcast&&data.shop===t.systemPluginConfig.key&&(t.notificationUnRead=data.notificationUnRead+t.notificationUnRead),data.broadcast||data.userId===t.$auth.user.userId&&(t.notificationUnRead=data.notificationUnRead))}catch(t){console.log(t)}}));case 6:case"end":return n.stop()}}),n)})))()},methods:{readAll:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var e;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$axios.$get("/notifications/readall");case 3:e=n.sent,t.notificationUnRead=e.isError?t.notificationUnRead:e.body.notificationUnRead,t.notifications=e.isError?t.notifications:e.body.data,n.next=12;break;case 8:n.prev=8,n.t0=n.catch(0),console.log(n.t0),res.json({isError:!0,message:n.t0.message});case 12:case"end":return n.stop()}}),n,null,[[0,8]])})))()},empty:function(t){return Object(w.isEmpty)(t)},price:function(t){return v.a.format(parseInt(t),{symbol:"",decimal:"",thousand:".",precision:0,format:"%v"})}}},_=y,C=(e(846),e(16)),component=Object(C.a)(_,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:function(){t.isNotification=!1,t.isSidebar=!1},expression:"\n    () => {\n      isNotification = false\n      isSidebar = false\n    }\n  "}],staticClass:"tw-sticky tw-top-0 tw-bg-white tw-border-b tw-border-gray-100",style:"z-index: "+(t.isOpen?"5000":"1000")},[e("div",{staticClass:"\n      tw-max-w-6xl\n      tw-mx-auto\n      tw-flex\n      tw-justify-between\n      tw-items-center\n      tw-px-2\n      tw-py-1\n      md:tw-py-2\n    "},[e("div",{staticClass:"tw-menu-left"},["index"===t.$route.name?e("a",{attrs:{href:"/"}},[e("img",{directives:[{name:"lazy-load",rawName:"v-lazy-load"}],staticClass:"tw-h-10",attrs:{"data-src":t.MEDIA+t.config.logo,"data-not-lazy":""}})]):e("nuxt-link",{attrs:{to:"/"}},[e("img",{directives:[{name:"lazy-load",rawName:"v-lazy-load"}],staticClass:"tw-h-10",attrs:{"data-src":t.MEDIA+t.config.logo,"data-not-lazy":""}})])],1),t._v(" "),e("div",{staticClass:"\n        tw-menu-right tw-flex tw-flex-wrap tw-items-center tw-justify-right\n      "},[t._m(0),t._v(" "),t.$auth.loggedIn?e("button",{directives:[{name:"click-outside",rawName:"v-click-outside",value:function(){t.isNotification=!1},expression:"\n          () => {\n            isNotification = false\n          }\n        "}],staticClass:"\n          tw-mr-3\n          md:tw-mr-4\n          tw-bg-gray-200\n          tw-items-center\n          tw-flex\n          tw-justify-center\n          tw-border\n          tw-border-gray-200\n          tw-w-8\n          md:tw-w-10\n          tw-text-lg\n          md:tw-text-2xl\n          tw-text-blue-800 tw-rounded-full tw-h-8\n          md:tw-h-10\n          hover:tw-cursor-pointer\n          tw-relative\n        ",on:{click:function(n){t.isNotification=!t.isNotification}}},[e("i",{staticClass:"bx bxs-bell"}),t._v(" "),t.notificationUnRead>0?e("span",{staticClass:"\n            tw-absolute\n            tw-text-white\n            tw-px-1\n            tw-text-xs\n            tw-inline-block\n            tw-rounded\n            tw-font-extrabold\n            tw-bg-red-600\n          ",staticStyle:{top:"-4px",right:"-8px"}},[t._v(t._s(t.notificationUnRead))]):t._e(),t._v(" "),t.isNotification?e("div",{staticClass:"\n            tw-notification tw-top-12\n            md:tw-top-14\n            tw-absolute tw-w-80 tw-max-w-md\n            md:tw-w-72\n            tw-rounded tw-bg-white tw-shadow-lg tw-border\n          ",staticStyle:{"z-index":"2"}},[e("div",{staticClass:"tw-w-full"},[e("div",{staticClass:"\n                tw-relative\n                tw-border-b\n                tw-border-gray-100\n                tw-p-2\n                tw-text-base\n                tw-text-gray-800\n                tw-font-bold\n                tw-bg-white\n                tw-rounded-t\n                vpopup\n                tw-cursor-default tw-text-left\n              "},[t._v("\n              Thông báo\n              "),t._v(" "),!t.empty(t.pinNotification)||t.notifications.length>0?e("button",{staticClass:"\n                  transition\n                  duration-200\n                  tw-absolute tw-bg-gray-700\n                  hover:tw-bg-red-600\n                  tw-rounded-full\n                  tw-h-6\n                  tw-w-6\n                  tw-flex\n                  tw-items-center\n                  tw-justify-center\n                  tw-text-center\n                  tw-text-white\n                ",staticStyle:{right:"10px",top:"8px"},on:{click:t.readAll}},[e("i",{staticClass:"bx bx-check-double"})]):t._e()]),t._v(" "),e("div",{staticClass:"\n                tw-text-sm\n                tw-text-left\n                tw-text-base\n                tw-text-gray-800\n                tw-pb-2\n                tw-py-1\n                tw-px-1\n              ",class:t.empty(t.pinNotification)&&t.notifications.length<=1?"tw-h-32":"tw-h-80",style:t.empty(t.pinNotification)&&t.notifications.length<=1?"":"overflow-y: auto"},[t.empty(t.pinNotification)&&0===t.notifications.length?e("div",{staticClass:"\n                  tw-text-gray-600\n                  tw-opacity-50\n                  tw-font-bold\n                  tw-text-center\n                  tw-py-6\n                  tw-text-sm\n                "},[t._v("\n                Không có thông báo\n              ")]):t._e(),t._v(" "),t.empty(t.pinNotification)?t._e():e("nuxt-link",{staticClass:"\n                  tw-block\n                  transition\n                  hover:tw-rounded\n                  duration-200\n                  tw-mb-1 tw-border-b tw-border-gray-100\n                  hover:tw-bg-gray-100\n                  tw-px-2\n                  tw-py-1\n                  tw-relative\n                  tw-text-red-600\n                  tw-font-semibold\n                  tw-pr-6\n                ",attrs:{to:"/myaccount/notification/"+t.pinNotification._id}},[t._v("\n                "+t._s(t.pinNotification.shortContent.slice(0,46))),t.pinNotification.shortContent.length>46?e("span",[t._v("...")]):t._e(),t._v(" "),e("p",{staticClass:"tw-relative tw-font-semibold",class:"unread"===t.pinNotification.status?"tw-text-red-600":"tw-text-gray-600",staticStyle:{top:"-2px"}},[e("small",[t._v(t._s(t.$moment(t.pinNotification.createAt).startOf("second").fromNow()))])]),t._v(" "),e("span",{staticClass:"\n                    tw-absolute\n                    tw-inline-flex\n                    tw-items-center\n                    tw-justify-center\n                    tw-w-5\n                    tw-h-5\n                    tw-rounded\n                    tw-bg-red-600\n                    tw-text-white\n                    tw-text-sm\n                  ",staticStyle:{right:"8px",top:"20%"}},[e("i",{staticClass:"bx bxs-pin"})])]),t._v(" "),t._l(t.notifications,(function(n){return e("nuxt-link",{key:n._id,staticClass:"\n                  tw-block tw-rounded\n                  transition\n                  duration-200\n                  hover:tw-bg-gray-100\n                  tw-px-2 tw-py-1 tw-relative tw-font-semibold\n                ",class:"unread"===n.status?"tw-pr-6":"",attrs:{to:"/myaccount/notification/"+n._id}},[t._v("\n                "+t._s(n.shortContent.slice(0,48))),n.shortContent.length>48?e("span",[t._v("...")]):t._e(),t._v(" "),e("p",{staticClass:"tw-relative tw-font-semibold",class:"unread"===n.status?"tw-text-red-600":"tw-text-gray-600",staticStyle:{top:"-2px"}},[e("small",[t._v(t._s(t.$moment(n.createAt).startOf("second").fromNow()))])]),t._v(" "),"unread"===n.status?e("span",{staticClass:"\n                    tw-absolute\n                    tw-inline-block\n                    tw-w-2\n                    tw-h-2\n                    tw-rounded\n                    tw-bg-red-600\n                  ",staticStyle:{right:"8px",top:"40%"}}):t._e()])}))],2),t._v(" "),!t.empty(t.pinNotification)||t.notifications.length>0?e("nuxt-link",{staticClass:"\n                tw-block tw-rounded\n                transition\n                duration-200\n                hover:tw-bg-gray-100\n                tw-px-2\n                tw-py-2\n                tw-border-t\n                tw-border-gray-100\n                tw-relative\n                tw-font-semibold\n                tw-text-sm\n                tw-text-gray-700\n              ",attrs:{to:"/myaccount/notification"}},[t._v("Xem tất cả")]):t._e()],1)]):t._e()]):t._e(),t._v(" "),t.$auth.loggedIn?e("div",{staticClass:"tw-relative"},[e("button",{staticClass:"\n            tw-bg-red-500\n            hover:tw-bg-red-600\n            tw-transition\n            tw-duration-200\n            tw-text-white\n            tw-text-sm\n            tw-flex\n            tw-items-center\n            tw-pr-8\n            tw-pl-2\n            md:tw-pl-3\n            tw-rounded-full tw-font-semibold tw-h-8\n            md:tw-h-10\n            tw-relative\n          ",staticStyle:{"min-width":"4rem"},on:{click:function(n){t.isSidebar=!t.isSidebar}}},[e("span",{},[e("img",{directives:[{name:"lazy-load",rawName:"v-lazy-load"}],staticClass:"tw-hidden md:tw-block tw-w-6 tw-rounded-full tw-border",attrs:{"data-src":"/unknown-avatar.jpg","data-not-lazy":""}})]),t._v(" "),e("span",{staticClass:"tw-hidden md:tw-block tw-relative tw-ml-1",staticStyle:{top:"-1px"}},[t._v("|")]),t._v(" "),e("span",{staticClass:"tw-ml-1 tw-font-bold"},[t._v(" "+t._s(t.price(t.balance))+"đ")]),t._v(" "),e("i",{staticClass:"\n              tw-top-1.5\n              md:tw-top-2.5\n              tw-text-lg tw-absolute\n              bx bx-caret-down-circle\n            ",staticStyle:{right:"8px"}})]),t._v(" "),t.isSidebar?e("div",{staticClass:"\n            tw-absolute\n            tw-max-w-md\n            tw-w-64\n            tw-rounded\n            tw-bg-white\n            tw-shadow-lg\n          ",staticStyle:{top:"46px","z-index":"2",right:"0px"},on:{mouseleave:function(n){t.isSidebar=!1}}},[e("div",{staticClass:"tw-w-64"},[e("div",{staticClass:"\n                tw-border-b\n                tw-border-gray-100\n                tw-grid\n                tw-grid-cols-12\n                tw-gap-2\n                tw-p-2\n              "},[e("div",{staticClass:"\n                  tw-col-span-2 tw-flex tw-items-center tw-justify-content\n                "},[e("img",{directives:[{name:"lazy-load",rawName:"v-lazy-load"}],staticClass:"tw-w-full tw-rounded-full",attrs:{"data-src":"/unknown-avatar.jpg","data-not-lazy":""}})]),t._v(" "),e("div",{staticClass:"tw-col-span-9"},[e("p",[e("b",[t._v("ID:")]),t._v(" "+t._s(t.$auth.user.userId))]),t._v(" "),e("p",[e("b",[t._v("Số dư:")]),t._v(" "),e("span",{staticClass:"tw-text-red-600 tw-font-bold"},[t._v(t._s(t.price(t.balance))+"đ")])]),t._v(" "),e("p",[e("b",[t._v("Xu khóa:")]),t._v(" "),e("span",{staticClass:"tw-text-red-600 tw-font-bold"},[t._v(t._s(t.price(t.balanceLock))+"xu")])])])]),t._v(" "),e("div",{staticClass:"tw-text-sm"},[e("span",{staticClass:"\n                  tw-mt-2\n                  tw-text-red-500\n                  tw-font-bold\n                  tw-text-sm\n                  tw-block\n                  tw-px-3\n                "},[t._v("\n                TÀI KHOẢN\n              ")]),t._v(" "),e("div",{staticClass:"tw-px-2"},[e("nuxt-link",{staticClass:"\n                    tw-font-semibold\n                    hover:tw-text-gray-800 hover:tw-bg-gray-100\n                    tw-block tw-py-1 tw-px-3\n                  ",attrs:{to:"/myaccount/profile"}},[e("i",{staticClass:"tw-relative bx bx-chevron-right",staticStyle:{top:"1px"}}),t._v("\n                  Thông tin chung")])],1),t._v(" "),e("span",{staticClass:"\n                  tw-text-red-500\n                  tw-font-bold\n                  tw-text-sm\n                  tw-my-1\n                  tw-block\n                  tw-px-3\n                "},[t._v("\n                NẠP TIỀN\n              ")]),t._v(" "),e("div",{staticClass:"tw-px-2"},[e("nuxt-link",{staticClass:"\n                    tw-font-semibold\n                    hover:tw-bg-gray-100 hover:tw-text-gray-800\n                    tw-block tw-py-1 tw-px-3\n                  ",attrs:{to:"/myaccount/transaction/recharge"}},[e("i",{staticClass:"tw-relative bx bx-chevron-right",staticStyle:{top:"1px"}}),t._v("\n                  Nạp thẻ cào (tự động)")]),t._v(" "),e("a",{staticClass:"\n                    tw-font-semibold\n                    hover:tw-bg-gray-100 hover:tw-text-gray-800\n                    tw-block tw-py-1 tw-px-3 tw-cursor-pointer\n                  ",on:{click:function(n){return t.$nuxt.$emit("transaction")}}},[e("i",{staticClass:"tw-relative bx bx-chevron-right",staticStyle:{top:"1px"}}),t._v("\n                  Nạp ATM/MOMO (tự động)")])],1),t._v(" "),e("span",{staticClass:"\n                  tw-text-red-500\n                  tw-font-bold\n                  tw-text-sm\n                  tw-my-1\n                  tw-block\n                  tw-px-3\n                "},[t._v("\n                LỊCH SỬ\n              ")]),t._v(" "),e("div",{staticClass:"tw-px-2"},[e("nuxt-link",{staticClass:"\n                    tw-font-semibold\n                    hover:tw-text-gray-800 hover:tw-bg-gray-100\n                    tw-block tw-py-1 tw-px-3\n                  ",attrs:{to:"/myaccount/history/game"}},[e("i",{staticClass:"tw-relative bx bx-chevron-right",staticStyle:{top:"1px"}}),t._v("\n                  Lịch sử chơi game")]),t._v(" "),e("nuxt-link",{staticClass:"\n                    tw-font-semibold\n                    hover:tw-text-gray-800 hover:tw-bg-gray-100\n                    tw-block tw-py-1 tw-px-3\n                  ",attrs:{to:"/myaccount/history/nick"}},[e("i",{staticClass:"tw-relative bx bx-chevron-right",staticStyle:{top:"1px"}}),t._v("\n                  Lịch sử mua nick")]),t._v(" "),e("nuxt-link",{staticClass:"\n                    tw-font-semibold\n                    hover:tw-text-gray-800 hover:tw-bg-gray-100\n                    tw-block tw-py-1 tw-px-3\n                  ",attrs:{to:"/myaccount/history/item"}},[e("i",{staticClass:"tw-relative bx bx-chevron-right",staticStyle:{top:"1px"}}),t._v("\n                  Lịch sử mua v.phẩm")])],1),t._v(" "),e("span",{staticClass:"\n                  tw-text-red-500\n                  tw-font-bold\n                  tw-text-sm\n                  tw-my-1\n                  tw-block\n                  tw-px-3\n                "},[t._v("\n                KHÁC\n              ")]),t._v(" "),e("div",{staticClass:"tw-px-2"},[e("nuxt-link",{staticClass:"\n                    tw-font-semibold\n                    hover:tw-text-gray-800 hover:tw-bg-gray-100\n                    tw-block tw-py-1 tw-px-3\n                  ",attrs:{to:"/myaccount/game/withdraw"}},[e("i",{staticClass:"tw-relative bx bx-chevron-right",staticStyle:{top:"1px"}}),t._v("\n                  Rút vật phẩm (KC,RP,QH...)")])],1),t._v(" "),e("div",{staticClass:"tw-p-2"},[e("button",{staticClass:"\n                    tw-py-1 tw-rounded tw-text-center tw-bg-red-500\n                    hover:tw-bg-red-600\n                    tw-text-white tw-font-semibold tw-w-full\n                  ",on:{click:function(n){return t.$auth.logout()}}},[t._v("\n                  Đăng xuất\n                ")])])])])]):t._e()]):e("button",{staticClass:"\n          tw-bg-red-500\n          hover:tw-bg-red-600\n          tw-transition\n          tw-duration-200\n          tw-text-white\n          tw-text-sm\n          tw-px-4\n          tw-rounded-full\n          tw-font-semibold\n          tw-h-8\n          md:tw-h-10\n          tw-relative\n        ",on:{click:function(n){t.isOpen=!0}}},[t._m(1),t._v(" "),e("span",{staticClass:"md:tw-ml-6"},[t._v("ĐĂNG NHẬP")])])])]),t._v(" "),t.isOpen&&"login"===t.swap?e("login",{on:{close:function(){t.isOpen=!1},swap:function(){t.swap="register"}}}):t._e(),t._v(" "),t.isOpen&&"register"===t.swap?e("register",{on:{close:function(){t.isOpen=!1},swap:function(){t.swap="login"}}}):t._e()],1)}),[function(){var t=this.$createElement,n=this._self._c||t;return n("button",{staticClass:"\n          tw-mr-1\n          md:tw-mr-2\n          tw-bg-gray-200\n          tw-items-center\n          tw-flex\n          tw-justify-center\n          tw-border\n          tw-border-gray-200\n          tw-w-8\n          md:tw-w-10\n          tw-rounded-full tw-text-red-600 tw-text-lg\n          md:tw-text-2xl\n          tw-h-8\n          md:tw-h-10\n        "},[n("i",{staticClass:"bx bxl-youtube"})])},function(){var t=this.$createElement,n=this._self._c||t;return n("span",{staticClass:"tw-hidden md:tw-inline-block"},[n("i",{staticClass:"tw-absolute tw-text-lg bx bxs-user",staticStyle:{top:"10px"}})])}],!1,null,null,null);n.default=component.exports},800:function(t,n,e){t.exports={}},845:function(t,n){function e(t){return"function"==typeof t.value||(console.warn("[Vue-click-outside:] provided expression",t.expression,"is not a function."),!1)}function o(t){return void 0!==t.componentInstance&&t.componentInstance.$isServer}t.exports={bind:function(t,n,r){if(!e(n))return;function c(n){if(r.context){var e=n.path||n.composedPath&&n.composedPath();e&&e.length>0&&e.unshift(n.target),t.contains(n.target)||function(t,n){if(!t||!n)return!1;for(var i=0,e=n.length;i<e;i++)try{if(t.contains(n[i]))return!0;if(n[i].contains(t))return!1}catch(t){return!1}return!1}(r.context.popupItem,e)||t.__vueClickOutside__.callback(n)}}t.__vueClickOutside__={handler:c,callback:n.value};const w="ontouchstart"in document.documentElement?"touchstart":"click";!o(r)&&document.addEventListener(w,c)},update:function(t,n){e(n)&&(t.__vueClickOutside__.callback=n.value)},unbind:function(t,n,e){const r="ontouchstart"in document.documentElement?"touchstart":"click";!o(e)&&t.__vueClickOutside__&&document.removeEventListener(r,t.__vueClickOutside__.handler),delete t.__vueClickOutside__}}},846:function(t,n,e){"use strict";e(800)}}]);